{
  "ReverseProxy": {
    "HealthCheck": {
      "Active": {
        "Enabled": true,
        "Interval": "00:00:10",
        "Timeout": "00:00:05",
        "Policy": "ConsecutiveFailures",
        "Path": "/health"
      }
    },
    "Routes": {
      "auth": {
        "Match": {
          "Path": "/Auth/v{version}/{**catchall}"
        },
        "ClusterId": "authCluster",
        "Transforms": [
          { "PathRemovePrefix": "/Auth" },
          {
            "RequestHeader": "Authorization",
            "Set": "{RequestHeader.Authorization}"
          },
          {
            "RequestHeader": "X-Custom-Header",
            "Set": "{RequestHeader.X-Custom-Header}"
          }
        ]
      },
      "routes": {
        "Match": {
          "Path": "/Routes/v{version}/{**catchall}"
        },
        "ClusterId": "routesCluster",
        "Transforms": [
          { "PathRemovePrefix": "/Routes" },
          {
            "RequestHeader": "Authorization",
            "Set": "{RequestHeader.Authorization}"
          },
          {
            "RequestHeader": "X-Custom-Header",
            "Set": "{RequestHeader.X-Custom-Header}"
          }
        ]
      },
      "payments": {
        "Match": {
          "Path": "/Payments/v{version}/{**catchall}"
        },
        "ClusterId": "paymentsCluster",
        "Transforms": [
          { "PathRemovePrefix": "/Payments" },
          {
            "RequestHeader": "Authorization",
            "Set": "{RequestHeader.Authorization}"
          },
          {
            "RequestHeader": "X-Custom-Header",
            "Set": "{RequestHeader.X-Custom-Header}"
          }
        ]
      }
    },
    "Clusters": {
      "authCluster": {
        "Destinations": {
          "auth": {
            "Address": "http://localhost:5001/"
          }
        }
      },
      "routesCluster": {
        "Destinations": {
          "routes": {
            "Address": "http://localhost:5002/"
          }
        }
      },
      "paymentsCluster": {
        "Destinations": {
          "payments": {
            "Address": "http://localhost:5003/"
          }
        }
      }
    }
  }
}
